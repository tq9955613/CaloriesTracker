(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{70:function(e,t,n){},94:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(18),a=n.n(r),s=n(27),i=n(0),j=n.n(i),u=n(25),l=n.n(u),d=(n(70),n(16)),o=n(3),b=n(6),O=n(12),h=Object(O.c)(),x=h.getInitialState(),m=Object(O.d)({name:"order",initialState:x,reducers:{orderAdded:h.addOne,orderDeleted:h.removeOne}}),f=m.actions,v=f.orderAdded,p=f.orderDeleted,g=h.getSelectors((function(e){return e.order})),N=g.selectById,C=g.selectIds,S=g.selectEntities,I=m.reducer,k=n(21),y=function(){var e=Object(o.g)(),t=Object(b.c)(S),n=Object(b.c)(C);if(0===n.length)return Object(c.jsxs)("div",{className:"notice",children:["Please order",Object(c.jsx)(d.b,{to:"/menu",children:"Go to Menu"})]});var r=Object.values(t).reduce((function(e,t){return e+t.calories}),0),a=n.map((function(e){return Object(c.jsx)(w,{id:e},e)}));return Object(c.jsxs)("div",{className:"order",children:[Object(c.jsxs)("div",{className:"board",children:["\u71b1\u91cf: ",r," Kcal"]}),Object(c.jsx)("div",{className:"meals",children:Object(c.jsx)("ul",{children:a})}),Object(c.jsx)("button",{onClick:function(){return e.push("/menu")},children:"\u52a0\u5165\u66f4\u591a\u9910\u9ede"})]})};function w(e){var t=e.id,n=Object(b.b)(),r=Object(b.c)((function(e){return N(e,t)})),a=r.name,s=r.calories;return Object(c.jsxs)("li",{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:a}),Object(c.jsxs)("div",{children:[s," Kcal"]})]}),Object(c.jsx)("button",{onClick:function(){return n(p(t))},children:Object(c.jsx)(k.c,{className:"iconBtn"})})]})}var A,B=n(36),D=n(22),L=n(28),M=n.n(L),F="/api/meals",E=Object(O.c)(),K=E.getInitialState({status:"initial"}),P=Object(O.b)("menu/fetchAll",Object(s.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get(F).then((function(e){return e.data}));case 2:return t=e.sent,n=t.meals,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),J=Object(O.b)("menu/menuAdded",function(){var e=Object(s.a)(a.a.mark((function e(t){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r=t,M.a.post(F,r).then((function(e){return e.data}));case 2:return n=e.sent,c=n.meal,e.abrupt("return",c);case 5:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()),T=Object(O.d)({name:"menu",initialState:K,reducers:{menuInit:function(e,t){e.status="initial",E.setAll(e,t)},menuDeleted:E.removeOne},extraReducers:(A={},Object(D.a)(A,P.pending,(function(e){e.status="loading"})),Object(D.a)(A,P.fulfilled,(function(e,t){E.setAll(e,t.payload),e.status="idle"})),Object(D.a)(A,P.rejected,(function(e){e.status="idle"})),Object(D.a)(A,J.fulfilled,E.addOne),A)}),G=T.actions,R=G.menuInit,q=(G.menuDeleted,E.getSelectors((function(e){return e.menu}))),z=q.selectById,H=q.selectIds,Q=T.reducer;function U(e){var t=e.id,n=Object(b.b)(),r=Object(o.g)(),a=Object(b.c)((function(e){return z(e,t)}));if(void 0===a)return null;var s=a.name,i=a.calories;return Object(c.jsx)("li",{children:Object(c.jsxs)("button",{onClick:function(e){n(v(a)),r.push("/order")},children:[Object(c.jsx)("div",{children:s}),Object(c.jsxs)("div",{children:[i," Kcal"]})]})})}function V(){var e=Object(i.useState)(""),t=Object(B.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(""),s=Object(B.a)(a,2),j=s[0],u=s[1],l=Object(b.b)();return Object(c.jsxs)("form",{className:"newMeal",children:[Object(c.jsxs)("div",{className:"left",children:[Object(c.jsx)("div",{children:Object(c.jsx)("input",{type:"text",value:n,placeholder:"New Meal...",onChange:function(e){return r(e.target.value)}})}),Object(c.jsx)("div",{children:Object(c.jsx)("input",{type:"text",value:j,placeholder:"Calories...",onChange:function(e){return u(e.target.value)}})})]}),Object(c.jsx)("div",{className:"right",children:Object(c.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),!n||isNaN(+j)||+j<0||(l(J({meal:{name:n,calories:+j}})),r(""),u(""))},children:Object(c.jsx)(k.a,{className:"iconBtn"})})})]})}var W=function(){var e=Object(b.b)(),t=Object(o.h)().pathname,n=Object(i.useState)(!1),r=Object(B.a)(n,2),a=r[0],s=r[1],j=Object(b.c)(H),u=Object(b.c)((function(e){return e.menu.status}));if(Object(i.useEffect)((function(){return e(P()),function(){e(R([]))}}),[]),"/menu"!==t)return Object(c.jsx)(o.a,{to:"/menu"});var l=j.map((function(e){return Object(c.jsx)(U,{id:e},e)}));return Object(c.jsxs)("div",{className:"menu",children:[Object(c.jsx)("div",{className:"categories"}),Object(c.jsxs)("div",{className:"meals",children:[Object(c.jsxs)("div",{className:"top",children:[Object(c.jsx)("h1",{className:"category",children:"ALL"}),Object(c.jsx)("button",{className:"menuAdded",onClick:function(e){return s((function(e){return!e}))},children:Object(c.jsx)(k.b,{className:"iconBtn"})})]}),a&&Object(c.jsx)(V,{}),"idle"!==u?Object(c.jsx)("span",{children:"Loading ..."}):Object(c.jsx)("ul",{children:l})]})]})};var X=function(){return Object(c.jsx)("div",{className:"app",children:Object(c.jsxs)(d.a,{children:[Object(c.jsx)("header",{children:Object(c.jsxs)("nav",{children:[Object(c.jsx)(d.c,{to:"menu",activeClassName:"active",children:"Menu"}),Object(c.jsx)(d.c,{to:"order",activeClassName:"active",children:"Order"})]})}),Object(c.jsx)("main",{children:Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{path:"/order",children:Object(c.jsx)(y,{})}),Object(c.jsx)(o.b,{path:"/menu",children:Object(c.jsx)(W,{})}),Object(c.jsx)(o.a,{to:"/"})]})}),Object(c.jsx)("footer",{})]})})};n(94);var Y=function(){return Object(c.jsx)(X,{})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};n(37);var $=Object(O.a)({reducer:{order:I,menu:Q}});l.a.render(Object(c.jsx)(j.a.StrictMode,{children:Object(c.jsx)(b.a,{store:$,children:Object(c.jsx)(Y,{})})}),document.getElementById("root")),Z()}},[[97,1,2]]]);
//# sourceMappingURL=main.0547ce0d.chunk.js.map